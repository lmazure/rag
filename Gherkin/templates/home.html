<html>
    <head>
        <title>Chroma Database Viewer</title>
        <style>
            table {
                border-collapse: collapse;
                margin: 10px 0;
            }
            th, td {
                border: 1px solid black;
                padding: 5px;
            }
            details {
                margin: 10px 0;
            }
            details > summary {
                cursor: pointer;
            }
            /* Style for model names (like H2) */
            details > summary {
                font-size: 1.5em;
                font-weight: bold;
                margin: 0.83em 0;
            }
            /* Style for type names (like H3) */
            details details > summary {
                font-size: 1.17em;
                margin: 1em 0;
            }
        </style>
    </head>
    <body>
        <h1>Chroma Database Viewer</h1>
        <div id="keywordsList"></div>
        <p>Access the database content at <a href="/keywords">/keywords</a></p>
        <p>Access the keyword types at <a href="/keyword_types">/keyword_types</a></p>
        <p>Access the models at <a href="/models">/models</a></p>
        
        <script>
            // Fetch and display keywords when the page loads
            window.onload = function() {
                fetch('/keywords')
                    .then(response => response.json())
                    .then(data => {
                        const keywordsList = document.getElementById('keywordsList');
                        Object.entries(data["data"]).forEach(([model, data]) => {
                            const modelElement = document.createElement('details');
                            const modelNameElement = document.createElement('summary');
                            modelNameElement.textContent = model;
                            modelElement.appendChild(modelNameElement);
                            const modelInfoElement = document.createElement('div');
                            modelInfoElement.textContent = `Dimension: ${data["metadata"]["dimension"]}`;
                            modelElement.appendChild(modelInfoElement);
                            keywordsList.appendChild(modelElement);
                            Object.entries(data["keywords"]).forEach(([type, keywords]) => {
                                const typeElement = document.createElement('details');  
                                const typeElementName = document.createElement('summary');
                                typeElementName.textContent = type;
                                typeElement.appendChild(typeElementName);
                                modelElement.appendChild(typeElement);
                                const tableElement = document.createElement('table');
                                const tableHeaderElement = document.createElement('tr');
                                const idHeaderElement = document.createElement('th');
                                idHeaderElement.textContent = "ID";
                                tableHeaderElement.appendChild(idHeaderElement);
                                const keywordHeaderElement = document.createElement('th');
                                keywordHeaderElement.textContent = "Keyword";
                                tableHeaderElement.appendChild(keywordHeaderElement);
                                tableElement.appendChild(tableHeaderElement);
                                keywords.forEach(keyword => {
                                    const rowElement = document.createElement('tr');
                                    const idElement = document.createElement('td');
                                    idElement.textContent = keyword["id"];
                                    rowElement.appendChild(idElement);
                                    const keywordElement = document.createElement('td');
                                    keywordElement.textContent = keyword["content"];
                                    rowElement.appendChild(keywordElement);
                                    tableElement.appendChild(rowElement);
                                })
                                typeElement.appendChild(tableElement);
                            })
                        })})
                    .catch(error => console.error('Error fetching keywords:', error));
            };
        </script>
    </body>
</html>